@model TimeManagement.ViewModels.AttendanceViewModel
@{
    ViewData["Title"] = "Attendance";
}

<h2 class="mb-4">My Attendance</h2>

<div class="mb-3">
    @if (Model.CanCheckIn)
    {
        <form asp-action="CheckIn" asp-controller="Attendance" method="post" style="display:inline">
            <button type="submit" class="btn btn-success">Check In</button>
        </form>
    }
    else if (Model.CanCheckOut)
    {
        <form asp-action="CheckOut" asp-controller="Attendance" method="post" style="display:inline">
            <button type="submit" class="btn btn-danger">Check Out</button>
        </form>
    }
    else
    {
        <span class="badge bg-info text-dark">You've completed attendance today</span>
    }
</div>

<li class="nav-item">
    <a class="nav-link text-dark" asp-area="" asp-controller="Attendance" asp-action="Scan">Scan</a>
</li>
<li class="nav-item">
    <a class="nav-link text-dark" asp-area="" asp-controller="Attendance" asp-action="QRCodes">QRCodes</a>
</li>

<!-- ✅ جدول الحضور -->
<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>Date</th>
            <th>Check In</th>
            <th>Check Out</th>
            <th>Status</th>
            <th>Work Hours</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var record in Model.Records)
        {
            <tr>
                <td>@record.Date.ToShortDateString()</td>
                <td>@(record.CheckIn?.ToString("hh:mm tt") ?? "-")</td>
                <td>@(record.CheckOut?.ToString("hh:mm tt") ?? "-")</td>
                <td>@record.Status</td>
                <td>@(record.WorkHours?.ToString("0.00") ?? "-")</td>
            </tr>
        }
    </tbody>
</table>
